<div class="form-container">
  <h2>Registro de Pacientes</h2>
  <form [formGroup]="formularioPaciente" (ngSubmit)="onSubmit()" novalidate>
    <!-- Nombre -->
    <label for="nombre">Nombre *</label>
    <input id="nombre" type="text" formControlName="nombre" placeholder="Juan" />
    <div *ngIf="formularioPaciente.get('nombre')?.errors?.['nombreApellidoInvalido'] && formularioPaciente.get('nombre')?.touched" class="error">
      El nombre solo debe contener letras y espacios.
    </div>

    <!-- Apellido -->
    <label for="apellido">Apellido *</label>
    <input id="apellido" type="text" formControlName="apellido" placeholder="Pérez" />
    <div *ngIf="formularioPaciente.get('apellido')?.errors?.['nombreApellidoInvalido'] && formularioPaciente.get('apellido')?.touched" class="error">
      El apellido solo debe contener letras y espacios.
    </div>

    <!-- RUT -->
    <label for="rut">RUT *</label>
    <input id="rut" type="text" formControlName="rut" placeholder="12345678-9" />
    <div *ngIf="formularioPaciente.get('rut')?.errors?.['rutInvalido'] && formularioPaciente.get('rut')?.touched" class="error">
      Ingrese un RUT chileno válido.
    </div>

    <!-- Fecha de Nacimiento -->
    <label for="fechaNacimiento">Fecha de Nacimiento *</label>
    <input id="fechaNacimiento" type="date" formControlName="fechaNacimiento" />

    <!-- Dirección -->
    <label for="direccion">Dirección</label>
    <input id="direccion" type="text" formControlName="direccion" placeholder="Calle Falsa 123" />

    <!-- Teléfono -->
    <label for="telefono">Teléfono</label>
    <input id="telefono" type="tel" formControlName="telefono" placeholder="+56 9XXXXXXXX" />
    <div *ngIf="formularioPaciente.get('telefono')?.errors?.['telefonoInvalido'] && formularioPaciente.get('telefono')?.touched" class="error">
      El teléfono debe tener formato chileno: +56 9XXXXXXXX.
    </div>

    <!-- Es Beneficiario -->
    <div class="switch-container">
      <label>
        <input type="checkbox" formControlName="esBeneficiario">
        Es beneficiario
      </label>
    </div>

    <!-- Tipo de Beneficio -->
    <div *ngIf="formularioPaciente.get('esBeneficiario')?.value">
      <label for="tipoBeneficio">Tipo de Beneficio</label>
      <select id="tipoBeneficio" formControlName="tipoBeneficio">
        <option [ngValue]="null">Seleccione un tipo</option>
        <option *ngFor="let tipo of tiposBeneficio" [value]="tipo">{{tipo}}</option>
      </select>
    </div>

    <!-- Botón -->
    <button type="submit" [disabled]="formularioPaciente.invalid">
      Registrar Paciente
    </button>
  </form>

  <!-- Toast de éxito -->
  <div *ngIf="successMessage" class="toast-success">
    {{ successMessage }}
    <span class="toast-arrow"></span>
  </div>
  <!-- Toast de error -->
  <div *ngIf="errorMessage" class="toast-error">
    {{ errorMessage }}
    <span class="toast-arrow"></span>
  </div>
</div>
